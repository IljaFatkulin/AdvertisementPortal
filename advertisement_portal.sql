--
-- PostgreSQL database dump
--

-- Dumped from database version 15.4
-- Dumped by pg_dump version 15.4

-- Started on 2023-10-15 17:07:58 EEST

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 219 (class 1259 OID 16900)
-- Name: attribute; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.attribute (
    id integer NOT NULL,
    name character varying(100)
);


ALTER TABLE public.attribute OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 16899)
-- Name: attribute_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.attribute ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.attribute_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 217 (class 1259 OID 16887)
-- Name: category; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.category (
    id integer NOT NULL,
    name character varying(100) NOT NULL
);


ALTER TABLE public.category OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 16941)
-- Name: category_attribute; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.category_attribute (
    id integer NOT NULL,
    category_id integer NOT NULL,
    attribute_id integer NOT NULL
);


ALTER TABLE public.category_attribute OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 16940)
-- Name: category_attribute_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.category_attribute ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.category_attribute_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 216 (class 1259 OID 16886)
-- Name: category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.category ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.category_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 215 (class 1259 OID 16879)
-- Name: product; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.product (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    price numeric(10,2) NOT NULL,
    description character varying(10000),
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone,
    category_id integer,
    avatar_path character varying
);


ALTER TABLE public.product OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16923)
-- Name: product_attribute_value; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.product_attribute_value (
    id integer NOT NULL,
    attribute_id integer NOT NULL,
    value1 character varying NOT NULL,
    product_id integer
);


ALTER TABLE public.product_attribute_value OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 16922)
-- Name: product_attribute_value_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.product_attribute_value ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.product_attribute_value_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 214 (class 1259 OID 16878)
-- Name: product_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.product ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.product_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3623 (class 0 OID 16900)
-- Dependencies: 219
-- Data for Name: attribute; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.attribute VALUES (1, 'Pages');
INSERT INTO public.attribute VALUES (2, 'Weight');
INSERT INTO public.attribute VALUES (9, 'RAM');
INSERT INTO public.attribute VALUES (10, 'Display');
INSERT INTO public.attribute VALUES (13, 'Width');
INSERT INTO public.attribute VALUES (17, 'Motor');
INSERT INTO public.attribute VALUES (18, 'Doors');


--
-- TOC entry 3621 (class 0 OID 16887)
-- Dependencies: 217
-- Data for Name: category; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.category VALUES (1, 'Book');
INSERT INTO public.category VALUES (2, 'Car');
INSERT INTO public.category VALUES (3, 'Phone');
INSERT INTO public.category VALUES (5, 'Food');
INSERT INTO public.category VALUES (6, 'Houses');
INSERT INTO public.category VALUES (8, 'Dogs');
INSERT INTO public.category VALUES (9, 'Cats');
INSERT INTO public.category VALUES (10, 'PC');
INSERT INTO public.category VALUES (11, 'Laptops');
INSERT INTO public.category VALUES (12, 'Keyboards');
INSERT INTO public.category VALUES (13, 'Tables');
INSERT INTO public.category VALUES (14, 'Beds');
INSERT INTO public.category VALUES (15, 'Toys');
INSERT INTO public.category VALUES (16, 'Clothes');
INSERT INTO public.category VALUES (17, '123');


--
-- TOC entry 3627 (class 0 OID 16941)
-- Dependencies: 223
-- Data for Name: category_attribute; Type: TABLE DATA; Schema: public; Owner: postgres
--



--
-- TOC entry 3619 (class 0 OID 16879)
-- Dependencies: 215
-- Data for Name: product; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.product VALUES (54, 'BMW M5', 15000.15, 'bmw', '2023-09-27 15:03:13.292', '2023-10-11 23:05:18.194', 2, '/ads/avatars/bmw.jpg');
INSERT INTO public.product VALUES (62, 'MB E63', 105521.00, 'nb', '2023-09-27 16:35:18.134', '2023-10-13 00:03:32.112', 2, '/ads/avatars/e63.jpeg');
INSERT INTO public.product VALUES (64, 'Iphone 15', 970.00, 'iphone', '2023-09-27 23:00:31.462', '2023-09-27 23:00:31.462', 3, NULL);
INSERT INTO public.product VALUES (1298, 'VW Passat B5', 800.00, 'passat', '2023-10-14 10:07:38.286', '2023-10-14 10:07:38.286', 2, '/ads/avatars/1697267258285f9a36f94-a19f-4aa1-8f7c-74e371fcc354.jpeg');
INSERT INTO public.product VALUES (1299, 'VW Passat b5', 15000.00, 'B5', '2023-10-14 10:08:54.17', '2023-10-14 10:08:54.17', 2, '/ads/avatars/1697267334169fa50efa4-441f-4e07-a533-3747462fe3a0.jpeg');
INSERT INTO public.product VALUES (1285, 'Porsche 911', 150000.00, 'porsche', '2023-10-13 12:51:17.213', '2023-10-13 12:51:17.213', 2, '/ads/avatars/porsche-911-gts2.jpg');
INSERT INTO public.product VALUES (1300, 'Audi 100', 129011.00, 'audi222', '2023-10-14 10:32:19.344', '2023-10-14 13:06:17.995', 2, '/ads/avatars/1697277977995aba880d9-555f-49f7-b3a4-c3bee2e6eb73.jpg');
INSERT INTO public.product VALUES (1302, 'Barbie 1', 55.00, 'barbie', '2023-10-14 13:30:50.745', '2023-10-14 13:30:50.745', 15, '/ads/avatars/16972794507441df3b88f-c569-4420-b47d-b4bb427c6b09.jpg');
INSERT INTO public.product VALUES (1303, 'barbie 2', 45.00, '123', '2023-10-14 13:31:15.461', '2023-10-14 13:31:15.461', 15, '/ads/avatars/169727947546034cdf9c5-687d-409f-8ebe-0b7d55c615f3.jpg');
INSERT INTO public.product VALUES (61, 'Audi RS6', 75000.00, 'This is description of AUdi rs6', '2023-09-27 15:02:13.303', '2023-10-06 13:04:58.166', 2, '/ads/avatars/audi.jpeg');


--
-- TOC entry 3625 (class 0 OID 16923)
-- Dependencies: 221
-- Data for Name: product_attribute_value; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.product_attribute_value VALUES (64, 9, '8', 64);
INSERT INTO public.product_attribute_value VALUES (80, 17, '5L', 61);
INSERT INTO public.product_attribute_value VALUES (81, 18, '5', 61);
INSERT INTO public.product_attribute_value VALUES (82, 17, '10L', 54);
INSERT INTO public.product_attribute_value VALUES (89, 17, '8L', 1300);


--
-- TOC entry 3633 (class 0 OID 0)
-- Dependencies: 218
-- Name: attribute_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.attribute_id_seq', 18, true);


--
-- TOC entry 3634 (class 0 OID 0)
-- Dependencies: 222
-- Name: category_attribute_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.category_attribute_id_seq', 14, true);


--
-- TOC entry 3635 (class 0 OID 0)
-- Dependencies: 216
-- Name: category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.category_id_seq', 18, true);


--
-- TOC entry 3636 (class 0 OID 0)
-- Dependencies: 220
-- Name: product_attribute_value_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.product_attribute_value_id_seq', 91, true);


--
-- TOC entry 3637 (class 0 OID 0)
-- Dependencies: 214
-- Name: product_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.product_id_seq', 1304, true);


--
-- TOC entry 3466 (class 2606 OID 16904)
-- Name: attribute attribute_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.attribute
    ADD CONSTRAINT attribute_pkey PRIMARY KEY (id);


--
-- TOC entry 3470 (class 2606 OID 16945)
-- Name: category_attribute category_attribute_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category_attribute
    ADD CONSTRAINT category_attribute_pkey PRIMARY KEY (id);


--
-- TOC entry 3462 (class 2606 OID 16898)
-- Name: category category_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_name_key UNIQUE (name);


--
-- TOC entry 3464 (class 2606 OID 16891)
-- Name: category category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_pkey PRIMARY KEY (id);


--
-- TOC entry 3468 (class 2606 OID 16929)
-- Name: product_attribute_value product_attribute_value_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.product_attribute_value
    ADD CONSTRAINT product_attribute_value_pkey PRIMARY KEY (id);


--
-- TOC entry 3460 (class 2606 OID 16885)
-- Name: product product_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.product
    ADD CONSTRAINT product_pkey PRIMARY KEY (id);


--
-- TOC entry 3474 (class 2606 OID 16976)
-- Name: category_attribute fk_attribute; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category_attribute
    ADD CONSTRAINT fk_attribute FOREIGN KEY (attribute_id) REFERENCES public.attribute(id) ON DELETE CASCADE;


--
-- TOC entry 3475 (class 2606 OID 16971)
-- Name: category_attribute fk_category; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category_attribute
    ADD CONSTRAINT fk_category FOREIGN KEY (category_id) REFERENCES public.category(id) ON DELETE CASCADE;


--
-- TOC entry 3472 (class 2606 OID 16935)
-- Name: product_attribute_value product_attribute_value_attribute_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.product_attribute_value
    ADD CONSTRAINT product_attribute_value_attribute_id_fkey FOREIGN KEY (attribute_id) REFERENCES public.attribute(id);


--
-- TOC entry 3473 (class 2606 OID 16956)
-- Name: product_attribute_value product_attribute_value_product_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.product_attribute_value
    ADD CONSTRAINT product_attribute_value_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.product(id) ON DELETE CASCADE;


--
-- TOC entry 3471 (class 2606 OID 16961)
-- Name: product product_category_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.product
    ADD CONSTRAINT product_category_id_fkey FOREIGN KEY (category_id) REFERENCES public.category(id) ON DELETE SET NULL;


-- Completed on 2023-10-15 17:07:59 EEST

--
-- PostgreSQL database dump complete
--

